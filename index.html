<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-800 text-white font-sans leading-normal tracking-normal min-h-screen flex flex-col items-center pt-20">

<h2 class="text-3xl font-extrabold">Search Packages</h2>

<input type="text" id="packageName" onkeyup="searchPackage()" placeholder="Search for packages.." class="w-1/4 p-2 mt-6 rounded bg-white text-gray-800">

<ul id="packageList" class="divide-y divide-gray-600 w-1/4 mt-6">
</ul>

<script>
function searchPackage() {
  var input, filter;
  input = document.getElementById('packageName');
  filter = input.value;

  fetch('https://aur.archlinux.org/rpc/v5/suggest/'+filter)
  .then(response => response.json())
  .then(data => {
    var ul = document.getElementById("packageList");
    ul.innerHTML = '';
    data.forEach(item => {
      var li = document.createElement("li");
      li.classList.add("px-6", "py-4");
      var dropdown = document.createElement("div");
      dropdown.classList.add("group", "relative");
      var dropdownContent = document.createElement("div");
      dropdownContent.classList.add("absolute", "w-64", "mt-2", "py-2", "bg-white", "rounded-lg", "shadow-xl", "opacity-0", "group-hover:opacity-100", "transition", "duration-200", "ease-in-out", "z-10");
      dropdown.appendChild(document.createTextNode(item));
      dropdown.appendChild(dropdownContent);
      li.appendChild(dropdown);
      ul.appendChild(li);
      dropdown.onmouseover = function(event) {
        var rect = dropdown.getBoundingClientRect();
        dropdownContent.style.left = (event.clientX - rect.left) + 'px';
        dropdownContent.style.top = (event.clientY - rect.top) + 'px';
      }
      fetch('https://aur.archlinux.org/rpc/v5/info/'+item)
      .then(response => response.json())
      .then(data => {
        dropdownContent.innerHTML = "<div class='px-4 py-2 text-black'>" + "Description: " + data.results[0].Description + "</div>" + "<div class='px-4 py-2 text-black'>" + "Version: " + data.results[0].Version + "</div>";
      })
      .catch((error) => {
        console.error('Error:', error);
      });
    });
  })
  .catch((error) => {
    console.error('Error:', error);
  });
}
</script>

</body>
</html>
